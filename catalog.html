<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags -->
    <title>Каталог премиального нижнего белья - Chill Out Lingerie | 156 изделий</title>
    <meta name="title" content="Каталог премиального нижнего белья - Chill Out Lingerie">
    <meta name="description" content="Каталог премиального нижнего белья Chill Out Lingerie. 156 изделий премиум класса: бюстгальтеры, трусики, пижамы, боди и многое другое. Бесплатная доставка по России. Фильтры по размеру, цвету и цене.">
    <meta name="keywords" content="каталог нижнего белья, лингерье каталог, премиум белье каталог, Chill Out Lingerie каталог, купить нижнее белье, бюстгальтеры, трусики, пижамы, боди">
    <meta name="author" content="Chill Out Lingerie">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://chilloutlingerie.com/catalog.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://chilloutlingerie.com/catalog.html">
    <meta property="og:title" content="Каталог премиального нижнего белья - Chill Out Lingerie | 156 изделий">
    <meta property="og:description" content="Откройте для себя 156 изделий премиального нижнего белья. Качество, комфорт и элегантность в каждом изделии. Фильтры по размеру, цвету и цене.">
    <meta property="og:image" content="https://storage.googleapis.com/uxpilot-auth.appspot.com/2fcc1bf8a5-be70f47eadce17c0083c.png">
    <meta property="og:image:secure_url" content="https://storage.googleapis.com/uxpilot-auth.appspot.com/2fcc1bf8a5-be70f47eadce17c0083c.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Каталог премиального нижнего белья Chill Out Lingerie">
    <meta property="og:image:type" content="image/png">
    <meta property="og:locale" content="ru_RU">
    <meta property="og:locale:alternate" content="en_US">
    <meta property="og:site_name" content="Chill Out Lingerie">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Каталог премиального нижнего белья - Chill Out Lingerie | 156 изделий">
    <meta name="twitter:description" content="Откройте для себя 156 изделий премиального нижнего белья. Качество, комфорт и элегантность в каждом изделии.">
    <meta name="twitter:image" content="https://storage.googleapis.com/uxpilot-auth.appspot.com/2fcc1bf8a5-be70f47eadce17c0083c.png">
    <meta name="twitter:image:alt" content="Каталог премиального нижнего белья Chill Out Lingerie">
    
    <!-- Structured Data (Schema.org) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "CollectionPage",
        "name": "Каталог премиального нижнего белья - Chill Out Lingerie",
        "description": "Каталог из 156 изделий премиального нижнего белья: бюстгальтеры, трусики, пижамы, боди и многое другое.",
        "url": "https://chilloutlingerie.com/catalog.html",
        "image": "https://storage.googleapis.com/uxpilot-auth.appspot.com/2fcc1bf8a5-be70f47eadce17c0083c.png",
        "mainEntity": {
            "@type": "ItemList",
            "numberOfItems": 156,
            "itemListElement": []
        }
    }
    </script>
    
    <!-- Предзагрузка критических ресурсов -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="dns-prefetch" href="https://storage.googleapis.com">
    
    <!-- External Resources -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script> window.FontAwesomeConfig = { autoReplaceSvg: 'nest'};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Montserrat:wght@200;300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="src/main.css">
</head>
<body>

<div id="menu-overlay" class="menu-overlay">
    <div class="container">
        <button onclick="closeMenu()" class="menu-close">
            <i class="fa-solid fa-times"></i>
        </button>
        <nav class="menu-nav">
            <a href="index.html" onclick="closeMenu()" data-i18n="menu.home">ГЛАВНАЯ</a>
            <a href="catalog.html" onclick="closeMenu()" class="active" data-i18n="menu.catalog">КАТАЛОГ</a>
            <a href="index.html#bestsellers" onclick="closeMenu()" data-i18n="menu.bestsellers">ХИТЫ ПРОДАЖ</a>
            <a href="index.html#new-arrivals" onclick="closeMenu()" data-i18n="menu.newArrivals">НОВИНКИ</a>
            <a href="index.html#about" onclick="closeMenu()" data-i18n="menu.about">О НАС</a>
            <a href="index.html#contact" onclick="closeMenu()" data-i18n="menu.contact">КОНТАКТЫ</a>
        </nav>
        <div class="menu-social">
            <a href="#"><i class="fa-brands fa-instagram"></i></a>
            <a href="#"><i class="fa-brands fa-facebook"></i></a>
            <a href="#"><i class="fa-brands fa-pinterest"></i></a>
            <a href="#"><i class="fa-brands fa-tiktok"></i></a>
        </div>
    </div>
</div>

<header id="header">
    <div class="header-container container">
        <button onclick="openMenu()" class="menu-btn">
            <i class="fa-solid fa-bars"></i>
        </button>
        
        <a href="index.html" style="text-decoration: none; color: inherit;">
            <img src="/logo.svg" alt="Chill Out Lingerie" class="header-logo-image">
            <h1 class="header-logo">Chill Out Lingerie®</h1>
        </a>
        
        <div class="header-actions">
            <button onclick="toggleLanguage()" class="lang-switcher" title="Переключить язык">
                <span class="lang-switcher-text">RU</span>
            </button>
            <a href="https://vk.com" target="_blank" class="icon-btn" title="ВКонтакте">
                <i class="fa-brands fa-vk"></i>
            </a>
            <button class="icon-btn">
                <i class="fa-solid fa-search"></i>
            </button>
        </div>
    </div>
    
</header>

<section id="catalog-hero" class="catalog-hero">
    <div class="catalog-hero-bg"></div>
    
    <div class="catalog-hero-content">
        <h2 data-i18n="catalog.hero.title">Наша Коллекция</h2>
        <p data-i18n="catalog.hero.text">Откройте для себя 156 изделий премиального нижнего белья, созданных для любого случая</p>
    </div>
</section>

<section id="catalog-main" class="catalog-main">
    <div class="catalog-container">
        <div class="catalog-layout">
            <aside id="filters-sidebar" class="filters-sidebar">
                <div class="filters-sticky">
                    <div class="filter-box">
                        <div class="filter-header">
                            <h3 data-i18n="catalog.filters.title">Фильтры</h3>
                            <button onclick="clearFilters()" class="clear-btn" data-i18n="catalog.filters.clearAll">Очистить Все</button>
                        </div>
                        
                        <div class="filter-section">
                            <h4 class="filter-section-header" data-section="category">
                                <span data-i18n="catalog.filters.category">Категория</span>
                                <i class="fa-solid fa-chevron-down filter-section-icon"></i>
                            </h4>
                            <div class="filter-options filter-section-content" data-section-content="category">
                                <input type="checkbox" id="cat-bras" class="filter-checkbox">
                                <label for="cat-bras" class="filter-label">
                                <span data-i18n="catalog.filters.categories.bras">Бюстгальтеры и Бралетты</span>
                                <span class="category-count" data-category="bras">(2)</span>
                                </label>
                                
                                <input type="checkbox" id="cat-panties" class="filter-checkbox">
                                <label for="cat-panties" class="filter-label">
                                <span data-i18n="catalog.filters.categories.panties">Трусики</span>
                                <span class="category-count" data-category="panties">(0)</span>
                                </label>
                                
                                <input type="checkbox" id="cat-sleepwear" class="filter-checkbox">
                                <label for="cat-sleepwear" class="filter-label">
                                <span data-i18n="catalog.filters.categories.sleepwear">Домашняя Одежда</span>
                                <span class="category-count" data-category="sleepwear">(6)</span>
                                </label>
                                
                                <input type="checkbox" id="cat-bodysuits" class="filter-checkbox">
                                <label for="cat-bodysuits" class="filter-label">
                                <span data-i18n="catalog.filters.categories.bodysuits">Боди</span>
                                <span class="category-count" data-category="bodysuits">(2)</span>
                                </label>
                                
                                <input type="checkbox" id="cat-robes" class="filter-checkbox">
                                <label for="cat-robes" class="filter-label">
                                <span data-i18n="catalog.filters.categories.robes">Халаты и Кимоно</span>
                                <span class="category-count" data-category="robes">(1)</span>
                                </label>
                                
                                <input type="checkbox" id="cat-bridal" class="filter-checkbox">
                                <label for="cat-bridal" class="filter-label">
                                <span data-i18n="catalog.filters.categories.bridal">Свадебная Коллекция</span>
                                <span class="category-count" data-category="bridal">(0)</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <h4 class="filter-section-header" data-section="price">
                                <span data-i18n="catalog.filters.priceRange">Диапазон Цен</span>
                                <i class="fa-solid fa-chevron-down filter-section-icon"></i>
                            </h4>
                            <div class="filter-section-content" data-section-content="price">
                                <input type="range" min="0" max="30000" step="1000" value="15000" class="price-slider">
                            <div class="price-range">
                                    <span>0 ₽</span>
                                    <span id="price-value">15 000 ₽</span>
                                    <span>30 000+ ₽</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <h4 class="filter-section-header" data-section="size">
                                <span data-i18n="catalog.filters.size">Размер</span>
                                <i class="fa-solid fa-chevron-down filter-section-icon"></i>
                            </h4>
                            <div class="size-grid filter-section-content" data-section-content="size">
                                <button class="size-btn">XS</button>
                                <button class="size-btn">S</button>
                                <button class="size-btn">M</button>
                                <button class="size-btn">L</button>
                                <button class="size-btn">XL</button>
                                <button class="size-btn">2XL</button>
                                <button class="size-btn">3XL</button>
                                <button class="size-btn">4XL</button>
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <h4 class="filter-section-header" data-section="color">
                                <span data-i18n="catalog.filters.color">Цвет</span>
                                <i class="fa-solid fa-chevron-down filter-section-icon"></i>
                            </h4>
                            <div class="color-grid filter-section-content" data-section-content="color">
                                <button class="color-btn" style="background: black;"></button>
                                <button class="color-btn" style="background: white;"></button>
                                <button class="color-btn" style="background: #dc2626;"></button>
                                <button class="color-btn" style="background: #fda4af;"></button>
                                <button class="color-btn" style="background: #1e3a8a;"></button>
                                <button class="color-btn" style="background: #059669;"></button>
                                <button class="color-btn" style="background: #9333ea;"></button>
                                <button class="color-btn" style="background: #fef3c7;"></button>
                                <button class="color-btn" style="background: #9ca3af;"></button>
                                <button class="color-btn" style="background: #fb7185;"></button>
                                <button class="color-btn" style="background: #0d9488;"></button>
                                <button class="color-btn" style="background: #ea580c;"></button>
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <h4 class="filter-section-header" data-section="material">
                                <span data-i18n="catalog.filters.material">Материал</span>
                                <i class="fa-solid fa-chevron-down filter-section-icon"></i>
                            </h4>
                            <div class="filter-options filter-section-content" data-section-content="material">
                                <input type="checkbox" id="mat-silk" class="filter-checkbox">
                                <label for="mat-silk" class="filter-label">
                                    <span data-i18n="catalog.filters.materials.silk">Шелк</span>
                                    <span class="material-count" data-material="silk">(6)</span>
                                </label>
                                
                                <input type="checkbox" id="mat-lace" class="filter-checkbox">
                                <label for="mat-lace" class="filter-label">
                                    <span data-i18n="catalog.filters.materials.lace">Кружево</span>
                                    <span class="material-count" data-material="lace">(4)</span>
                                </label>
                                
                                <input type="checkbox" id="mat-satin" class="filter-checkbox">
                                <label for="mat-satin" class="filter-label">
                                    <span data-i18n="catalog.filters.materials.satin">Атлас</span>
                                    <span class="material-count" data-material="satin">(2)</span>
                                </label>
                                
                                <input type="checkbox" id="mat-cotton" class="filter-checkbox">
                                <label for="mat-cotton" class="filter-label">
                                    <span data-i18n="catalog.filters.materials.cotton">Хлопок</span>
                                    <span class="material-count" data-material="cotton">(1)</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <h4 class="filter-section-header" data-section="rating">
                                <span data-i18n="catalog.filters.rating">Рейтинг</span>
                                <i class="fa-solid fa-chevron-down filter-section-icon"></i>
                            </h4>
                            <div class="filter-section-content" data-section-content="rating">
                            <button class="rating-btn">
                                <div class="rating-stars">
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                </div>
                                <span class="rating-text" data-i18n="catalog.filters.rating.up">& Up</span>
                            </button>
                            <button class="rating-btn">
                                <div class="rating-stars">
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-regular fa-star"></i>
                                </div>
                                <span class="rating-text" data-i18n="catalog.filters.rating.up">& Up</span>
                            </button>
                            <button class="rating-btn">
                                <div class="rating-stars">
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-regular fa-star"></i>
                                    <i class="fa-regular fa-star"></i>
                                </div>
                                <span class="rating-text" data-i18n="catalog.filters.rating.up">& Up</span>
                            </button>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
            
            <main id="products-grid" class="products-grid">
                <div class="products-toolbar">
                    <div class="toolbar-content">
                        <div class="toolbar-left">
                            <p class="products-count">
                                <span data-i18n="catalog.products.showing">Показано</span> <span class="products-visible-count">11</span> <span data-i18n="catalog.products.products">товаров</span>
                            </p>
                            <div class="view-toggle">
                                <button onclick="toggleView('grid')" class="view-btn active" title="Сетка">
                                    <i class="fa-solid fa-th-large"></i>
                                </button>
                                <button onclick="toggleView('list')" class="view-btn" title="Список">
                                    <i class="fa-solid fa-list"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="toolbar-right">
                            <div class="search-wrapper-toolbar">
                                <input type="text" placeholder="Поиск товаров..." class="search-input-toolbar" data-i18n-placeholder="catalog.searchPlaceholder">
                                <i class="fa-solid fa-search search-icon-toolbar"></i>
                            </div>
                            <div class="sort-wrapper-toolbar">
                                <label for="sort-select" data-i18n="catalog.sort.label">Сортировать:</label>
                                <select id="sort-select" class="sort-select">
                                    <option value="featured" data-i18n="catalog.sort.featured">Рекомендуемые</option>
                                    <option value="priceLow" data-i18n="catalog.sort.priceLow">Цена: По Возрастанию</option>
                                    <option value="priceHigh" data-i18n="catalog.sort.priceHigh">Цена: По Убыванию</option>
                                    <option value="newest" data-i18n="catalog.sort.newest">Новинки</option>
                                    <option value="bestselling" data-i18n="catalog.sort.bestselling">Хиты Продаж</option>
                                    <option value="topRated" data-i18n="catalog.sort.topRated">Высокий Рейтинг</option>
                            </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="products-container">
                    <div class="product-card" data-category="bras" data-material="lace" data-price="7800" data-rating="5" data-color="black" data-sizes="XS,S,M,L,XL">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/6555e7d064-c3b9b19a9e4b32d7ad33.png" alt="elegant black lace bralette">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                            <div class="product-badge badge-new" data-i18n="product.badge.new">НОВИНКА</div>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.midnightLaceBralette.title">Midnight Lace Bralette</h4>
                        <p class="product-description" data-i18n="product.items.midnightLaceBralette.description">Delicate French lace</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <span class="product-reviews">(127)</span>
                        </div>
                        <p class="product-price">7 800 ₽</p>
                    </div>
                    
                    <div class="product-card" data-category="sleepwear" data-material="silk" data-price="14500" data-rating="5" data-color="champagne" data-sizes="S,M,L,XL">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/b56beff876-e29888d5a8ccd0f22677.png" alt="champagne silk slip dress">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                            <div class="product-badge badge-bestseller" data-i18n="product.badge.bestseller">ХИТ ПРОДАЖ</div>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.champagneSilkSlip.title">Champagne Silk Slip</h4>
                        <p class="product-description" data-i18n="product.items.champagneSilkSlip.description">Pure mulberry silk</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <span class="product-reviews">(284)</span>
                        </div>
                        <p class="product-price">14 500 ₽</p>
                    </div>
                    
                    <div class="product-card" data-category="bodysuits" data-material="satin" data-price="9200" data-rating="4" data-color="rose" data-sizes="XS,S,M,L">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/0ff1edacf9-0d1b5003996b1b432a27.png" alt="burgundy lace set">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.roseSatinBodysuit.title">Rose Satin Bodysuit</h4>
                        <p class="product-description" data-i18n="product.items.roseSatinBodysuit.description">Italian satin blend</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-regular fa-star"></i>
                            </div>
                            <span class="product-reviews">(92)</span>
                        </div>
                        <p class="product-price">9 200 ₽</p>
                    </div>
                    
                    <div class="product-card" data-category="bodysuits" data-material="lace" data-price="11800" data-rating="5" data-color="ivory" data-sizes="S,M,L,XL,2XL">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/d34cd14776-fd8800389b5e3f0b7c82.png" alt="ivory lace teddy">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.ivoryLaceTeddy.title">Ivory Lace Teddy</h4>
                        <p class="product-description" data-i18n="product.items.ivoryLaceTeddy.description">Chantilly lace</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <span class="product-reviews">(215)</span>
                        </div>
                        <p class="product-price">11 800 ₽</p>
                    </div>
                    
                    <div class="product-card" data-category="robes" data-material="silk" data-price="16800" data-rating="5" data-color="emerald" data-sizes="M,L,XL,2XL">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/5c08a7f1c6-b1f2b1fff0aab95f6104.png" alt="emerald silk robe">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.emeraldSilkRobe.title">Emerald Silk Robe</h4>
                        <p class="product-description" data-i18n="product.items.emeraldSilkRobe.description">Luxurious silk charmeuse</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <span class="product-reviews">(178)</span>
                        </div>
                        <p class="product-price">16 800 ₽</p>
                    </div>
                    
                    <div class="product-card" data-category="sleepwear" data-material="cotton" data-price="8200" data-rating="4" data-color="white" data-sizes="XS,S,M,L,XL,2XL">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/a550f76729-2f940b8687fba9bc8a11.png" alt="white cotton camisole set">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.cloudCamisoleSet.title">Cloud Camisole Set</h4>
                        <p class="product-description" data-i18n="product.items.cloudCamisoleSet.description">Pima cotton & lace</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-regular fa-star"></i>
                            </div>
                            <span class="product-reviews">(156)</span>
                        </div>
                        <p class="product-price">8 200 ₽</p>
                    </div>
                    
                    <div class="product-card" data-category="sleepwear" data-material="satin" data-price="8400" data-rating="5" data-color="navy" data-sizes="S,M,L,XL">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/48870ed260-bde48a1c7ea8473e1e41.png" alt="navy satin chemise">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                            <div class="product-badge badge-sale">-20%</div>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.midnightChemise.title">Midnight Chemise</h4>
                        <p class="product-description" data-i18n="product.items.midnightChemise.description">Satin with lace accents</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <span class="product-reviews">(203)</span>
                        </div>
                        <div class="price-wrapper">
                            <p class="product-price">8 400 ₽</p>
                            <p class="price-old">10 500 ₽</p>
                        </div>
                    </div>
                    
                    <div class="product-card" data-category="sleepwear" data-material="silk" data-price="12500" data-rating="4" data-color="peach" data-sizes="XS,S,M,L">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/8ec3f80d6a-ff62832bf3e5711e34a5.png" alt="peach silk set">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.peachDreamSet.title">Peach Dream Set</h4>
                        <p class="product-description" data-i18n="product.items.peachDreamSet.description">Silk bralette & shorts</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-regular fa-star"></i>
                            </div>
                            <span class="product-reviews">(134)</span>
                        </div>
                        <p class="product-price">12 500 ₽</p>
                    </div>
                    
                    <div class="product-card" data-category="sleepwear" data-material="silk" data-price="19500" data-rating="5" data-color="champagne" data-sizes="S,M,L,XL,2XL">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/18e9a25748-4b11a0bfe27d58a635f0.png" alt="champagne pajama set">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                            <div class="product-badge badge-new" data-i18n="product.badge.new">НОВИНКА</div>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.champagneDreamsPJSet.title">Champagne Dreams PJ Set</h4>
                        <p class="product-description" data-i18n="product.items.champagneDreamsPJSet.description">Signature silk blend</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <span class="product-reviews">(89)</span>
                        </div>
                        <p class="product-price">19 500 ₽</p>
                    </div>
                    
                    <div class="product-card" data-category="sleepwear" data-material="lace" data-price="8800" data-rating="4" data-color="rose" data-sizes="S,M,L">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/425b0cfdf7-0c3bc91ccd1a89de7620.png" alt="rose lace set">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.roseGardenSet.title">Rose Garden Set</h4>
                        <p class="product-description" data-i18n="product.items.roseGardenSet.description">Floral lace design</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-regular fa-star"></i>
                            </div>
                            <span class="product-reviews">(167)</span>
                        </div>
                        <p class="product-price">8 800 ₽</p>
                    </div>
                    
                    <div class="product-card" data-category="sleepwear" data-material="silk" data-price="7200" data-rating="5" data-color="sage" data-sizes="XS,S,M">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/9748b8f173-db06ed5110f8b9df1561.png" alt="sage silk cami">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.sageSilkCami.title">Sage Silk Cami</h4>
                        <p class="product-description" data-i18n="product.items.sageSilkCami.description">Minimalist elegance</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <span class="product-reviews">(112)</span>
                        </div>
                        <p class="product-price">7 200 ₽</p>
                    </div>
                    
                    <div class="product-card" data-category="bras" data-material="lace" data-price="6500" data-rating="5" data-color="black" data-sizes="XS,S,M,L,XL,2XL">
                        <div class="product-image-wrapper">
                            <img class="product-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/2fcc1bf8a5-be70f47eadce17c0083c.png" alt="luxury lace bras">
                            <div class="product-overlay">
                                <button class="quick-view-btn" data-i18n="product.quickView">БЫСТРЫЙ ПРОСМОТР</button>
                            </div>
                            <button class="wishlist-btn">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                            <div class="product-badge badge-bestseller" data-i18n="product.badge.bestseller">ХИТ ПРОДАЖ</div>
                        </div>
                        <h4 class="product-title" data-i18n="product.items.velvetNoirBralette.title">Velvet Noir Bralette</h4>
                        <p class="product-description" data-i18n="product.items.velvetNoirBralette.description">Soft cup design</p>
                        <div class="product-rating">
                            <div class="product-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <span class="product-reviews">(298)</span>
                        </div>
                        <p class="product-price">6 500 ₽</p>
                    </div>
                </div>
                
                <div id="pagination" class="pagination">
                    <div class="pagination-content">
                        <button class="page-btn">
                            <i class="fa-solid fa-chevron-left"></i>
                        </button>
                        <button class="page-btn active">1</button>
                        <button class="page-btn">2</button>
                        <button class="page-btn">3</button>
                        <button class="page-btn">4</button>
                        <button class="page-btn">5</button>
                        <span class="page-dots">...</span>
                        <button class="page-btn">13</button>
                        <button class="page-btn">
                            <i class="fa-solid fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>
</section>

<section id="featured-categories" class="featured-categories">
    <div class="section-header">
        <h2 data-i18n="catalog.categories.title">Покупка По Стилю</h2>
        <p data-i18n="catalog.categories.subtitle">Найдите свой идеальный вариант</p>
    </div>
    
    <div class="categories-grid">
        <div class="category-card">
            <img class="category-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/adb8294d8c-f1aa37cfc2108dacaf05.png" alt="romantic lace collection">
            <div class="category-overlay"></div>
            <div class="category-content">
                <h3 data-i18n="catalog.categories.romantic">Романтичный</h3>
                <p>42 товара</p>
            </div>
        </div>
        
        <div class="category-card">
            <img class="category-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/22b45282c5-14a43d12bcbfd0bb3828.png" alt="elegant silk sleepwear">
            <div class="category-overlay"></div>
            <div class="category-content">
                <h3 data-i18n="catalog.categories.elegant">Элегантный</h3>
                <p>38 товаров</p>
            </div>
        </div>
        
        <div class="category-card">
            <img class="category-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/b4b7c4de51-082c1749c35819c5b24b.png" alt="sexy black lingerie">
            <div class="category-overlay"></div>
            <div class="category-content">
                <h3 data-i18n="catalog.categories.seductive">Соблазнительный</h3>
                <p>51 товар</p>
            </div>
        </div>
        
        <div class="category-card">
            <img class="category-image" loading="lazy" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/b968491bc7-138dd7e45dcca10c68bc.png" alt="comfortable loungewear">
            <div class="category-overlay"></div>
            <div class="category-content">
                <h3 data-i18n="catalog.categories.comfort">Комфорт</h3>
                <p>25 товаров</p>
            </div>
        </div>
    </div>
</section>

<section id="vk-notice">
    <div class="container">
        <div class="vk-notice-content">
            <div class="vk-notice-info">
                <div class="vk-icon-wrapper">
                    <i class="fa-brands fa-vk"></i>
                </div>
                <div>
                    <h3 class="vk-notice-title" data-i18n="vkNotice.title">Покупайте через ВКонтакте</h3>
                    <p class="vk-notice-text" data-i18n="vkNotice.text">
                        Этот сайт создан для ознакомления с коллекцией. Все заказы принимаются в нашей группе ВКонтакте
                    </p>
                </div>
            </div>
            <a href="https://vk.com" target="_blank" class="btn-vk-large">
                <i class="fa-brands fa-vk"></i>
                <span data-i18n="vkNotice.button">ПЕРЕЙТИ В VK</span>
            </a>
        </div>
    </div>
</section>

<footer id="footer">
    <div class="container">
        <div class="footer-main">
            <div>
                <h3 class="footer-brand">Chill Out Lingerie</h3>
                <p class="footer-desc" data-i18n="footer.description">
                    Повышаем уровень интимного белья с вневременной элегантностью, премиальным качеством и инклюзивными дизайнами для современной женщины.
                </p>
                <div class="footer-social">
                    <a href="https://vk.com" target="_blank" class="vk">
                        <i class="fa-brands fa-vk"></i>
                    </a>
                    <a href="#">
                        <i class="fa-brands fa-instagram"></i>
                    </a>
                    <a href="#">
                        <i class="fa-brands fa-facebook"></i>
                    </a>
                    <a href="#">
                        <i class="fa-brands fa-pinterest"></i>
                    </a>
                    <a href="#">
                        <i class="fa-brands fa-tiktok"></i>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p class="footer-copyright">© 2024 Chill Out Lingerie. All rights reserved.</p>
        </div>
    </div>
</footer>

<script>
    // Система переводов
    const translations = {
        ru: {
            menu: {
                home: 'ГЛАВНАЯ',
                catalog: 'КАТАЛОГ',
                bestsellers: 'ХИТЫ ПРОДАЖ',
                newArrivals: 'НОВИНКИ',
                about: 'О НАС',
                contact: 'КОНТАКТЫ'
            },
            product: {
                quickView: 'БЫСТРЫЙ ПРОСМОТР',
                badge: {
                    new: 'НОВИНКА',
                    bestseller: 'ХИТ ПРОДАЖ'
                },
                items: {
                    midnightLaceBralette: {
                        title: 'Мистический Кружевной Бралетт',
                        description: 'Нежное французское кружево'
                    },
                    champagneSilkSlip: {
                        title: 'Шампанское Шелковое Платье',
                        description: 'Чистый шелк тутового дерева'
                    },
                    roseSatinBodysuit: {
                        title: 'Розовый Атласный Боди',
                        description: 'Итальянская атласная смесь'
                    },
                    ivoryLaceTeddy: {
                        title: 'Слоновая Кружевная Тедди',
                        description: 'Кружево Шантильи'
                    },
                    emeraldSilkRobe: {
                        title: 'Изумрудный Шелковый Халат',
                        description: 'Роскошный шелковый шармез'
                    },
                    cloudCamisoleSet: {
                        title: 'Облачный Комплект Камизоль',
                        description: 'Пима хлопок и кружево'
                    },
                    midnightChemise: {
                        title: 'Полуночная Сорочка',
                        description: 'Атлас с кружевными акцентами'
                    },
                    peachDreamSet: {
                        title: 'Персиковый Комплект Мечта',
                        description: 'Шелковый бралетт и шорты'
                    },
                    champagneDreamsPJSet: {
                        title: 'Комплект Пижамы Шампанское Мечты',
                        description: 'Фирменная шелковая смесь'
                    },
                    midnightLaceBralette: {
                        title: 'Полуночный Бралетт с Кружевом',
                        description: 'Нежное французское кружево'
                    },
                    champagneSilkSlip: {
                        title: 'Шелковая Сорочка Шампанское',
                        description: 'Чистый шелк тутового дерева'
                    },
                    roseSatinBodysuit: {
                        title: 'Розовое Атласное Боди',
                        description: 'Итальянская атласная смесь'
                    },
                    ivoryLaceTeddy: {
                        title: 'Слоновая Кость Кружевное Тедди',
                        description: 'Кружево Шантильи'
                    },
                    emeraldSilkRobe: {
                        title: 'Изумрудный Шелковый Халат',
                        description: 'Роскошный шелковый шармез'
                    },
                    midnightChemise: {
                        title: 'Полуночная Сорочка',
                        description: 'Атлас с кружевными акцентами'
                    },
                    roseGardenSet: {
                        title: 'Комплект Розовый Сад',
                        description: 'Цветочный кружевной дизайн'
                    },
                    sageSilkCami: {
                        title: 'Шалфейная Шелковая Камизоль',
                        description: 'Минималистичная элегантность'
                    },
                    velvetNoirBralette: {
                        title: 'Бралетт Бархат Нуар',
                        description: 'Дизайн с мягкой чашкой'
                    }
                }
            },
            catalog: {
                searchPlaceholder: 'Поиск товаров...',
                hero: {
                    title: 'Наша Коллекция',
                    text: 'Откройте для себя 156 изделий премиального нижнего белья, созданных для любого случая'
                },
                filters: {
                    title: 'Фильтры',
                    clearAll: 'Очистить Все',
                    category: 'Категория',
                    categories: {
                        bras: 'Бюстгальтеры и Бралетты',
                        panties: 'Трусики',
                        sleepwear: 'Домашняя Одежда',
                        bodysuits: 'Боди',
                        robes: 'Халаты и Кимоно',
                        bridal: 'Свадебная Коллекция'
                    },
                    priceRange: 'Диапазон Цен',
                    size: 'Размер',
                    color: 'Цвет',
                    material: 'Материал',
                    materials: {
                        silk: 'Шелк',
                        lace: 'Кружево',
                        satin: 'Атлас',
                        cotton: 'Хлопок'
                    },
                    rating: 'Рейтинг',
                    up: '& Up'
                },
                products: {
                    showing: 'Показано',
                    products: 'товаров'
                },
                sort: {
                    label: 'Сортировать:',
                    featured: 'Рекомендуемые',
                    priceLow: 'Цена: По Возрастанию',
                    priceHigh: 'Цена: По Убыванию',
                    newest: 'Новинки',
                    bestselling: 'Хиты Продаж',
                    topRated: 'Высокий Рейтинг'
                },
                categories: {
                    title: 'Покупка По Стилю',
                    subtitle: 'Найдите свой идеальный вариант',
                    romantic: 'Романтичный',
                    elegant: 'Элегантный',
                    seductive: 'Соблазнительный',
                    comfort: 'Комфорт'
                }
            },
            footer: {
                description: 'Повышаем уровень интимного белья с вневременной элегантностью, премиальным качеством и инклюзивными дизайнами для современной женщины.'
            },
            vkNotice: {
                title: 'Покупайте через ВКонтакте',
                text: 'Этот сайт создан для ознакомления с коллекцией. Все заказы принимаются в нашей группе ВКонтакте',
                button: 'ПЕРЕЙТИ В VK'
            }
        },
        en: {
            menu: {
                home: 'HOME',
                catalog: 'CATALOG',
                bestsellers: 'BESTSELLERS',
                newArrivals: 'NEW ARRIVALS',
                about: 'ABOUT',
                contact: 'CONTACT'
            },
            product: {
                quickView: 'QUICK VIEW',
                badge: {
                    new: 'NEW',
                    bestseller: 'BESTSELLER'
                },
                items: {
                    midnightLaceBralette: {
                        title: 'Midnight Lace Bralette',
                        description: 'Delicate French lace'
                    },
                    champagneSilkSlip: {
                        title: 'Champagne Silk Slip',
                        description: 'Pure mulberry silk'
                    },
                    roseSatinBodysuit: {
                        title: 'Rose Satin Bodysuit',
                        description: 'Italian satin blend'
                    },
                    ivoryLaceTeddy: {
                        title: 'Ivory Lace Teddy',
                        description: 'Chantilly lace'
                    },
                    emeraldSilkRobe: {
                        title: 'Emerald Silk Robe',
                        description: 'Luxurious silk charmeuse'
                    },
                    cloudCamisoleSet: {
                        title: 'Cloud Camisole Set',
                        description: 'Pima cotton & lace'
                    },
                    midnightChemise: {
                        title: 'Midnight Chemise',
                        description: 'Satin with lace accents'
                    },
                    peachDreamSet: {
                        title: 'Peach Dream Set',
                        description: 'Silk bralette & shorts'
                    },
                    champagneDreamsPJSet: {
                        title: 'Champagne Dreams PJ Set',
                        description: 'Signature silk blend'
                    },
                    roseGardenSet: {
                        title: 'Rose Garden Set',
                        description: 'Floral lace design'
                    },
                    sageSilkCami: {
                        title: 'Sage Silk Cami',
                        description: 'Minimalist elegance'
                    },
                    velvetNoirBralette: {
                        title: 'Velvet Noir Bralette',
                        description: 'Soft cup design'
                    }
                }
            },
            catalog: {
                searchPlaceholder: 'Search for products...',
                hero: {
                    title: 'Our Collection',
                    text: 'Discover 156 pieces of premium lingerie designed for every occasion'
                },
                filters: {
                    title: 'Filters',
                    clearAll: 'Clear All',
                    category: 'Category',
                    categories: {
                        bras: 'Bras & Bralettes',
                        panties: 'Panties',
                        sleepwear: 'Sleepwear',
                        bodysuits: 'Bodysuits',
                        robes: 'Robes & Kimonos',
                        bridal: 'Bridal Collection'
                    },
                    priceRange: 'Price Range',
                    size: 'Size',
                    color: 'Color',
                    material: 'Material',
                    materials: {
                        silk: 'Silk',
                        lace: 'Lace',
                        satin: 'Satin',
                        cotton: 'Cotton'
                    },
                    rating: 'Rating',
                    up: '& Up'
                },
                products: {
                    showing: 'Showing',
                    products: 'products'
                },
                sort: {
                    label: 'Sort by:',
                    featured: 'Featured',
                    priceLow: 'Price: Low to High',
                    priceHigh: 'Price: High to Low',
                    newest: 'Newest Arrivals',
                    bestselling: 'Best Selling',
                    topRated: 'Top Rated'
                },
                categories: {
                    title: 'Shop by Style',
                    subtitle: 'Find your perfect match',
                    romantic: 'Romantic',
                    elegant: 'Elegant',
                    seductive: 'Seductive',
                    comfort: 'Comfort'
                }
            },
            footer: {
                description: 'Elevating intimate apparel with timeless elegance, premium quality, and inclusive designs for the modern woman.'
            },
            vkNotice: {
                title: 'Shop via VKontakte',
                text: 'This site is created to browse the collection. All orders are accepted in our VKontakte group',
                button: 'GO TO VK'
            }
        }
    };

    // Текущий язык (по умолчанию русский)
    let currentLanguage = localStorage.getItem('language') || 'ru';

    // Функция получения перевода
    function getTranslation(key, lang = currentLanguage) {
        const keys = key.split('.');
        let value = translations[lang];
        for (const k of keys) {
            value = value?.[k];
        }
        return value || key;
    }

    // Функция перевода страницы
    function translatePage(lang) {
        currentLanguage = lang;
        localStorage.setItem('language', lang);
        document.documentElement.lang = lang;

        // Обновляем текст переключателя языка
        const langSwitcher = document.querySelector('.lang-switcher-text');
        if (langSwitcher) {
            langSwitcher.textContent = lang.toUpperCase();
        }

        // Переводим все элементы с data-i18n
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            const translation = getTranslation(key, lang);
            if (translation && translation !== key) {
                el.textContent = translation;
            }
        });

        // Переводим placeholder
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            const translation = getTranslation(key, lang);
            if (translation) {
                el.placeholder = translation;
            }
        });

        // Обновляем селекты
        document.querySelectorAll('select option[data-i18n]').forEach(option => {
            const key = option.getAttribute('data-i18n');
            const translation = getTranslation(key, lang);
            if (translation) {
                option.textContent = translation;
            }
        });
    }

    // Функция переключения языка
    function toggleLanguage() {
        const newLang = currentLanguage === 'ru' ? 'en' : 'ru';
        translatePage(newLang);
    }

    function openMenu() {
        document.getElementById('menu-overlay').classList.add('active');
    }
    
    function closeMenu() {
        document.getElementById('menu-overlay').classList.remove('active');
    }
    
    
    // ============================================================================
    // КАТАЛОГ: ОПТИМИЗИРОВАННЫЙ КОД ДЛЯ ПРОДАКШЕНА
    // ============================================================================
    
    // Кеш DOM-элементов для оптимизации производительности
    const catalogCache = {
        products: null,
        productsContainer: null,
        productsCount: null,
        searchInput: null,
        priceSlider: null,
        priceValue: null,
        sortSelect: null,
        emptyState: null,
        originalOrder: [] // Сохраняем исходный порядок товаров
    };
    
    // Маппинг цветов для фильтрации (оптимизированная версия)
    const COLOR_MAP = {
        'black': ['black', '#000', '#000000', 'rgb(0, 0, 0)', 'rgb(0,0,0)'],
        'white': ['white', '#fff', '#ffffff', 'rgb(255, 255, 255)', 'rgb(255,255,255)'],
        'red': ['red', '#dc2626', 'rgb(220, 38, 38)', 'rgb(220,38,38)'],
        'rose': ['rose', '#fda4af', 'rgb(253, 164, 175)', 'rgb(253,164,175)'],
        'navy': ['navy', '#1e3a8a', 'rgb(30, 58, 138)', 'rgb(30,58,138)'],
        'green': ['green', '#059669', 'rgb(5, 150, 105)', 'rgb(5,150,105)'],
        'purple': ['purple', '#9333ea', 'rgb(147, 51, 234)', 'rgb(147,51,234)'],
        'yellow': ['yellow', '#fef3c7', 'rgb(254, 243, 199)', 'rgb(254,243,199)'],
        'gray': ['gray', 'grey', '#9ca3af', 'rgb(156, 163, 175)', 'rgb(156,163,175)'],
        'pink': ['pink', '#fb7185', 'rgb(251, 113, 133)', 'rgb(251,113,133)'],
        'teal': ['teal', '#0d9488', 'rgb(13, 148, 136)', 'rgb(13,148,136)'],
        'orange': ['orange', '#ea580c', 'rgb(234, 88, 12)', 'rgb(234,88,12)'],
        'champagne': ['champagne', '#f7e7ce', '#f5e6d3', 'rgb(247, 231, 206)'],
        'emerald': ['emerald', '#50c878', '#059669', 'rgb(5, 150, 105)'],
        'ivory': ['ivory', '#fffff0', '#fffef0', 'rgb(255, 255, 240)'],
        'peach': ['peach', '#ffdab9', '#ffe5b4', 'rgb(255, 218, 185)'],
        'sage': ['sage', '#87ae73', '#9caf88', 'rgb(135, 174, 115)']
    };
    
    // Текущее состояние фильтров (для оптимизации)
    let filterState = {
        search: '',
        categories: [],
        materials: [],
        price: 300,
        sizes: [],
        colors: [],
        rating: 0
    };
    
    // Состояние пагинации
    let paginationState = {
        currentPage: 1,
        itemsPerPage: 12,
        totalItems: 0,
        totalPages: 1
    };
    
    // Состояние вида отображения
    let viewState = {
        type: 'grid' // grid или list
    };
    
    // Debounce функция для оптимизации
    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
    
    // Инициализация кеша DOM-элементов
    function initCatalogCache() {
        try {
            catalogCache.products = Array.from(document.querySelectorAll('.product-card'));
            catalogCache.productsContainer = document.querySelector('.products-container');
            catalogCache.productsCount = document.querySelector('.products-visible-count');
            catalogCache.searchInput = document.querySelector('.search-input-toolbar');
            catalogCache.priceSlider = document.querySelector('.price-slider');
            catalogCache.priceValue = document.getElementById('price-value');
            catalogCache.sortSelect = document.querySelector('#sort-select') || document.querySelector('.sort-select');
            
            // Сохраняем исходный порядок товаров (копируем массив ссылок)
            if (catalogCache.products && catalogCache.products.length > 0) {
                catalogCache.originalOrder = [...catalogCache.products];
            }
            
            // Устанавливаем значение по умолчанию для сортировки
            if (catalogCache.sortSelect) {
                catalogCache.sortSelect.value = 'featured';
            }
            
            // Создаем элемент для пустого состояния, если его нет
            if (!document.querySelector('.empty-state')) {
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                emptyState.style.display = 'none';
                emptyState.style.textAlign = 'center';
                emptyState.style.padding = '4rem 2rem';
                emptyState.style.color = '#9ca3af';
                emptyState.innerHTML = '<h3 style="font-size: 1.5rem; margin-bottom: 1rem; color: #d4af37;">Товары не найдены</h3><p>Попробуйте изменить параметры фильтрации</p>';
                catalogCache.productsContainer.parentElement.appendChild(emptyState);
                catalogCache.emptyState = emptyState;
            } else {
                catalogCache.emptyState = document.querySelector('.empty-state');
            }
        } catch (error) {
            console.error('Ошибка инициализации кеша:', error);
        }
    }
    
    // Функция для получения цветовой категории из CSS цвета
    function getColorCategory(cssColor) {
        if (!cssColor) return null;
        const colorLower = cssColor.toLowerCase().trim();
        
        // Проверяем все возможные варианты
        for (const [category, variants] of Object.entries(COLOR_MAP)) {
            if (variants.some(v => colorLower.includes(v.toLowerCase()))) {
                return category;
            }
        }
        return null;
    }
    
    // Оптимизированная функция фильтрации с использованием requestAnimationFrame
    function filterProducts() {
        if (!catalogCache.products || catalogCache.products.length === 0) return;
        
        // Используем requestAnimationFrame для плавности
        requestAnimationFrame(() => {
            try {
                // Получаем активные фильтры (оптимизированная версия)
                const searchTerm = (catalogCache.searchInput?.value || '').toLowerCase().trim();
                const maxPrice = catalogCache.priceSlider ? parseInt(catalogCache.priceSlider.value) || 30000 : 30000;
                
                // Категории
                const categoryFilters = Array.from(document.querySelectorAll('.filter-checkbox[id^="cat-"]:checked'))
                    .map(cb => cb.id.replace('cat-', ''));
                
                // Материалы
                const materialFilters = Array.from(document.querySelectorAll('.filter-checkbox[id^="mat-"]:checked'))
                    .map(cb => cb.id.replace('mat-', ''));
                
                // Размеры
                const sizeFilters = Array.from(document.querySelectorAll('.size-btn.active'))
                    .map(btn => btn.textContent.trim().toUpperCase());
                
                // Цвета - получаем категории цветов из выбранных кнопок
                const colorFilters = [];
                document.querySelectorAll('.color-btn.active').forEach(btn => {
                    const bgColor = btn.style.backgroundColor || window.getComputedStyle(btn).backgroundColor;
                    const colorCategory = getColorCategory(bgColor);
                    if (colorCategory) {
                        colorFilters.push(colorCategory);
                    }
                });
                
                // Рейтинг
                let minRating = 0;
                const ratingBtn = document.querySelector('.rating-btn.active');
                if (ratingBtn) {
                    minRating = ratingBtn.querySelectorAll('.fa-solid.fa-star').length;
                }
                
                let visibleCount = 0;
                const productsToShow = [];
                const productsToHide = [];
                
                // Оптимизированная фильтрация
                catalogCache.products.forEach(product => {
                    let show = true;
                    
                    // Кешируем атрибуты товара
                    const category = product.getAttribute('data-category');
                    const material = product.getAttribute('data-material');
                    const price = parseFloat(product.getAttribute('data-price')) || 0;
                    const rating = parseInt(product.getAttribute('data-rating')) || 0;
                    const productColor = product.getAttribute('data-color');
                    const sizes = (product.getAttribute('data-sizes') || '').toUpperCase().split(',');
                    
                    // Поиск
                    if (show && searchTerm) {
                        const titleEl = product.querySelector('.product-title');
                        const descEl = product.querySelector('.product-description');
                        const title = titleEl ? titleEl.textContent.toLowerCase() : '';
                        const description = descEl ? descEl.textContent.toLowerCase() : '';
                        show = title.includes(searchTerm) || description.includes(searchTerm);
                    }
                    
                    // Категория
                    if (show && categoryFilters.length > 0) {
                        show = categoryFilters.includes(category);
                    }
                    
                    // Материал
                    if (show && materialFilters.length > 0) {
                        show = materialFilters.includes(material);
                    }
                    
                    // Цена
                    if (show) {
                        show = price <= maxPrice;
                    }
                    
                    // Размер
                    if (show && sizeFilters.length > 0) {
                        show = sizeFilters.some(size => sizes.includes(size.trim()));
                    }
                    
                    // Цвет
                    if (show && colorFilters.length > 0) {
                        show = productColor && colorFilters.includes(productColor.toLowerCase());
                    }
                    
                    // Рейтинг
                    if (show && minRating > 0) {
                        show = rating >= minRating;
                    }
                    
                    // Сохраняем результат
                    if (show) {
                        productsToShow.push(product);
                        visibleCount++;
                    } else {
                        productsToHide.push(product);
                    }
                });
                
                // Применяем изменения с плавными переходами
                // Сначала скрываем товары, которые должны быть скрыты
                productsToHide.forEach(product => {
                    // Добавляем data-атрибут для отслеживания состояния фильтрации
                    product.setAttribute('data-filtered-out', 'true');
                    product.style.opacity = '0';
                    product.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        product.style.display = 'none';
                        product.style.opacity = '';
                        product.style.transform = '';
                    }, 150);
                });
                
                // Показываем товары, которые должны быть видны
                productsToShow.forEach(product => {
                    // Убираем data-атрибут фильтрации
                    product.removeAttribute('data-filtered-out');
                    product.style.display = '';
                    requestAnimationFrame(() => {
                        product.style.opacity = '0';
                        product.style.transform = 'scale(0.95)';
                        requestAnimationFrame(() => {
                            product.style.opacity = '1';
                            product.style.transform = 'scale(1)';
                            product.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                        });
                    });
                });
                
                // Обновляем счетчик товаров
                if (catalogCache.productsCount) {
                    catalogCache.productsCount.textContent = visibleCount;
                }
                
                // Показываем/скрываем сообщение о пустых результатах
                if (catalogCache.emptyState) {
                    if (visibleCount === 0) {
                        catalogCache.emptyState.style.display = 'block';
                    } else {
                        catalogCache.emptyState.style.display = 'none';
                    }
                }
                
                // Сбрасываем пагинацию на первую страницу при фильтрации
                paginationState.currentPage = 1;
                
                // Применяем пагинацию к видимым товарам только если есть видимые товары
                if (visibleCount > 0) {
                    setTimeout(() => applyPagination(), 100);
                } else {
                    // Если товаров нет, обновляем UI пагинации
                    setTimeout(() => updatePagination(0), 100);
                }
                
                // Обновляем счетчики фильтров (асинхронно для производительности)
                setTimeout(() => updateFilterCounts(), 150);
                
                // Сохраняем состояние фильтров
                filterState = {
                    search: searchTerm,
                    categories: categoryFilters,
                    materials: materialFilters,
                    price: maxPrice,
                    sizes: sizeFilters,
                    colors: colorFilters,
                    rating: minRating
                };
            } catch (error) {
                console.error('Ошибка фильтрации:', error);
            }
        });
    }
    
    // Оптимизированная функция обновления счетчиков
    function updateFilterCounts() {
        if (!catalogCache.products) return;
        
        requestAnimationFrame(() => {
            try {
                const searchTerm = (catalogCache.searchInput?.value || '').toLowerCase().trim();
                const maxPrice = catalogCache.priceSlider ? parseInt(catalogCache.priceSlider.value) || 30000 : 30000;
                
                let minRating = 0;
                const ratingBtn = document.querySelector('.rating-btn.active');
                if (ratingBtn) {
                    minRating = ratingBtn.querySelectorAll('.fa-solid.fa-star').length;
                }
                
                const activeCategoryFilters = Array.from(document.querySelectorAll('.filter-checkbox[id^="cat-"]:checked'))
                    .map(cb => cb.id.replace('cat-', ''));
                const activeMaterialFilters = Array.from(document.querySelectorAll('.filter-checkbox[id^="mat-"]:checked'))
                    .map(cb => cb.id.replace('mat-', ''));
                
                // Получаем фильтры по размерам и цветам
                const sizeFilters = Array.from(document.querySelectorAll('.size-btn.active'))
                    .map(btn => btn.textContent.trim().toUpperCase());
                
                const colorFilters = [];
                document.querySelectorAll('.color-btn.active').forEach(btn => {
                    const bgColor = btn.style.backgroundColor || window.getComputedStyle(btn).backgroundColor;
                    const colorCategory = getColorCategory(bgColor);
                    if (colorCategory) {
                        colorFilters.push(colorCategory);
                    }
                });
                
                const categoryCounts = {
                    'bras': 0, 'panties': 0, 'sleepwear': 0,
                    'bodysuits': 0, 'robes': 0, 'bridal': 0
                };
                
                const materialCounts = {
                    'silk': 0, 'lace': 0, 'satin': 0, 'cotton': 0
                };
                
                catalogCache.products.forEach(product => {
                    const category = product.getAttribute('data-category');
                    const material = product.getAttribute('data-material');
                    const price = parseFloat(product.getAttribute('data-price')) || 0;
                    const rating = parseInt(product.getAttribute('data-rating')) || 0;
                    const productColor = product.getAttribute('data-color');
                    const sizes = (product.getAttribute('data-sizes') || '').toUpperCase().split(',');
                    
                    // Проверяем соответствие базовым фильтрам (поиск, цена, рейтинг)
                    // НЕ проверяем фильтры по категориям и материалам при подсчете их счетчиков
                    let matchesFilters = true;
                    
                    if (searchTerm) {
                        const titleEl = product.querySelector('.product-title');
                        const descEl = product.querySelector('.product-description');
                        const title = titleEl ? titleEl.textContent.toLowerCase() : '';
                        const description = descEl ? descEl.textContent.toLowerCase() : '';
                        matchesFilters = title.includes(searchTerm) || description.includes(searchTerm);
                    }
                    
                    if (matchesFilters) {
                        matchesFilters = price <= maxPrice;
                    }
                    
                    if (matchesFilters && minRating > 0) {
                        matchesFilters = rating >= minRating;
                    }
                    
                    // Проверяем фильтры по размерам и цветам (они должны учитываться)
                    if (matchesFilters && sizeFilters.length > 0) {
                        matchesFilters = sizeFilters.some(size => sizes.includes(size.trim()));
                    }
                    
                    if (matchesFilters && colorFilters.length > 0) {
                        matchesFilters = productColor && colorFilters.includes(productColor.toLowerCase());
                    }
                    
                    if (!matchesFilters) return;
                    
                    // Считаем категории
                    // Логика: для каждой категории показываем количество товаров этой категории,
                    // которые пройдут все фильтры БЕЗ учета фильтра по категориям
                    // Но учитываем материалы, размеры и цвета, если они выбраны
                    if (category && categoryCounts.hasOwnProperty(category)) {
                        let shouldCount = true;
                        
                        // Учитываем фильтр по материалам, если он активен
                        if (activeMaterialFilters.length > 0) {
                            if (!material || !activeMaterialFilters.includes(material)) {
                                shouldCount = false;
                            }
                        }
                        
                        // НЕ проверяем фильтр по категориям - показываем для всех категорий
                        
                        if (shouldCount) {
                            categoryCounts[category]++;
                        }
                    }
                    
                    // Считаем материалы
                    // Логика: для каждого материала показываем количество товаров этого материала,
                    // которые пройдут все фильтры БЕЗ учета фильтра по материалам
                    // Но учитываем категории, размеры и цвета, если они выбраны
                    if (material && materialCounts.hasOwnProperty(material)) {
                        let shouldCount = true;
                        
                        // Учитываем фильтр по категориям, если он активен
                        if (activeCategoryFilters.length > 0) {
                            if (!category || !activeCategoryFilters.includes(category)) {
                                shouldCount = false;
                            }
                        }
                        
                        // НЕ проверяем фильтр по материалам - показываем для всех материалов
                        
                        if (shouldCount) {
                            materialCounts[material]++;
                        }
                    }
                });
                
                // Обновляем DOM (батчинг для производительности)
                Object.keys(categoryCounts).forEach(cat => {
                    const el = document.querySelector(`.category-count[data-category="${cat}"]`);
                    if (el) el.textContent = `(${categoryCounts[cat]})`;
                });
                
                Object.keys(materialCounts).forEach(mat => {
                    const el = document.querySelector(`.material-count[data-material="${mat}"]`);
                    if (el) el.textContent = `(${materialCounts[mat]})`;
                });
            } catch (error) {
                console.error('Ошибка обновления счетчиков:', error);
            }
        });
    }
    
    // Функция инициализации счетчиков (вызывается один раз при загрузке)
    function initializeCounts() {
        if (!catalogCache.products) return;
        
        try {
            const categoryCounts = {
                'bras': 0, 'panties': 0, 'sleepwear': 0,
                'bodysuits': 0, 'robes': 0, 'bridal': 0
            };
            
            const materialCounts = {
                'silk': 0, 'lace': 0, 'satin': 0, 'cotton': 0
            };
            
            catalogCache.products.forEach(product => {
                const category = product.getAttribute('data-category');
                const material = product.getAttribute('data-material');
                
                if (category && categoryCounts.hasOwnProperty(category)) {
                    categoryCounts[category]++;
                }
                if (material && materialCounts.hasOwnProperty(material)) {
                    materialCounts[material]++;
                }
            });
            
            Object.keys(categoryCounts).forEach(cat => {
                const el = document.querySelector(`.category-count[data-category="${cat}"]`);
                if (el) el.textContent = `(${categoryCounts[cat]})`;
            });
            
            Object.keys(materialCounts).forEach(mat => {
                const el = document.querySelector(`.material-count[data-material="${mat}"]`);
                if (el) el.textContent = `(${materialCounts[mat]})`;
            });
            
            if (catalogCache.productsCount) {
                catalogCache.productsCount.textContent = catalogCache.products.length;
            }
            
            paginationState.totalItems = catalogCache.products.length;
            paginationState.totalPages = Math.ceil(paginationState.totalItems / paginationState.itemsPerPage);
            updatePagination(catalogCache.products.length);
        } catch (error) {
            console.error('Ошибка инициализации счетчиков:', error);
        }
    }
    
    // Функция очистки фильтров
    function clearFilters() {
        try {
            // Очищаем чекбоксы
            document.querySelectorAll('.filter-checkbox').forEach(checkbox => {
            checkbox.checked = false;
        });
            
            // Сбрасываем слайдер цены
            if (catalogCache.priceSlider) {
                catalogCache.priceSlider.value = 30000;
                if (catalogCache.priceValue) {
                    catalogCache.priceValue.textContent = '30 000 ₽';
                }
            }
            
            // Очищаем поиск
            if (catalogCache.searchInput) {
                catalogCache.searchInput.value = '';
            }
            
            // Снимаем активные состояния с кнопок
            document.querySelectorAll('.size-btn, .color-btn, .rating-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Сбрасываем сортировку
            if (catalogCache.sortSelect) {
                catalogCache.sortSelect.value = 'featured';
            }
            
            // Сбрасываем пагинацию
            paginationState.currentPage = 1;
            
            // Убираем data-атрибуты фильтрации со всех товаров
            if (catalogCache.products) {
                catalogCache.products.forEach(product => {
                    product.removeAttribute('data-filtered-out');
                });
            }
            
            // Применяем фильтрацию
            filterProducts();
        } catch (error) {
            console.error('Ошибка очистки фильтров:', error);
        }
    }
    
    // Функция переключения вида (grid/list)
    function toggleView(viewType) {
        try {
            if (!catalogCache.productsContainer) return;
            
            viewState.type = viewType;
            
            // Обновляем активные кнопки
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            const activeBtn = document.querySelector(`.view-btn[onclick*="${viewType}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
            
            // Применяем класс для вида списка или сетки
            if (viewType === 'list') {
                catalogCache.productsContainer.classList.add('list-view');
            } else {
                catalogCache.productsContainer.classList.remove('list-view');
            }
            
            // Сохраняем предпочтение
            localStorage.setItem('catalogView', viewType);
        } catch (error) {
            console.error('Ошибка переключения вида:', error);
        }
    }
    
    // Функция сортировки товаров с сохранением скролла
    function sortProducts(sortType) {
        if (!catalogCache.productsContainer) return;
        
        // Если выбрана сортировка "Рекомендуемые", восстанавливаем исходный порядок
        if (sortType === 'featured') {
            try {
                const scrollY = window.scrollY;
                
                requestAnimationFrame(() => {
                    // Получаем все товары из контейнера
                    const allProducts = Array.from(catalogCache.productsContainer.querySelectorAll('.product-card'));
                    
                    // Разделяем на видимые (не скрытые фильтрацией) и скрытые фильтрацией
                    const visibleProducts = [];
                    const hiddenByFilter = [];
                    
                    allProducts.forEach(product => {
                        if (product.hasAttribute('data-filtered-out')) {
                            hiddenByFilter.push(product);
                        } else {
                            visibleProducts.push(product);
                        }
                    });
                    
                    // Восстанавливаем исходный порядок для видимых товаров
                    // Сортируем видимые товары по их позиции в исходном порядке
                    if (catalogCache.originalOrder && catalogCache.originalOrder.length > 0) {
                        visibleProducts.sort((a, b) => {
                            const indexA = catalogCache.originalOrder.indexOf(a);
                            const indexB = catalogCache.originalOrder.indexOf(b);
                            // Если товар не найден в исходном порядке, помещаем его в конец
                            if (indexA === -1) return 1;
                            if (indexB === -1) return -1;
                            return indexA - indexB;
                        });
                    }
                    
                    // Временно отключаем transition
                    allProducts.forEach(product => {
                        product.style.transition = 'none';
                    });
                    
                    // Создаем DocumentFragment для эффективного добавления элементов
                    const fragment = document.createDocumentFragment();
                    
                    // Добавляем видимые товары в исходном порядке
                    visibleProducts.forEach(product => {
                        fragment.appendChild(product);
                    });
                    
                    // Добавляем товары, скрытые фильтрацией
                    hiddenByFilter.forEach(product => {
                        fragment.appendChild(product);
                    });
                    
                    // Очищаем контейнер и добавляем все элементы в правильном порядке
                    catalogCache.productsContainer.innerHTML = '';
                    catalogCache.productsContainer.appendChild(fragment);
                    
                    // Восстанавливаем display статус для видимых товаров
                    visibleProducts.forEach(product => {
                        product.style.display = '';
                        product.style.opacity = '1';
                        product.style.transform = '';
                    });
                    
                    // Скрытые фильтрацией остаются скрытыми
                    hiddenByFilter.forEach(product => {
                        product.style.display = 'none';
                    });
                    
                    // Восстанавливаем transition
                    setTimeout(() => {
                        allProducts.forEach(product => {
                            product.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                        });
                    }, 50);
                    
                    // Обновляем кеш продуктов
                    catalogCache.products = Array.from(catalogCache.productsContainer.querySelectorAll('.product-card'));
                    
                    // Применяем пагинацию заново
                    if (visibleProducts.length > 0) {
                        paginationState.currentPage = 1;
                        setTimeout(() => applyPagination(), 100);
                    } else {
                        setTimeout(() => updatePagination(0), 100);
                    }
                    
                    // Восстанавливаем позицию скролла
                    requestAnimationFrame(() => {
                        window.scrollTo(0, scrollY);
                    });
                });
            } catch (error) {
                console.error('Ошибка восстановления исходного порядка:', error);
            }
            return;
        }
        
        try {
            // Сохраняем позицию скролла
            const scrollY = window.scrollY;
            
            requestAnimationFrame(() => {
                // Получаем ВСЕ товары из контейнера
                const allProducts = Array.from(catalogCache.productsContainer.querySelectorAll('.product-card'));
                
                // Разделяем на видимые (не скрытые фильтрацией) и скрытые фильтрацией
                const visibleProducts = [];
                const hiddenByFilter = [];
                
                allProducts.forEach(product => {
                    // Товары, скрытые фильтрацией, имеют data-filtered-out="true"
                    if (product.hasAttribute('data-filtered-out')) {
                        hiddenByFilter.push(product);
                    } else {
                        visibleProducts.push(product);
                    }
                });
                
                // Сохраняем текущий display статус для видимых товаров (могут быть скрыты пагинацией)
                const visibleProductDisplayStates = new Map();
                visibleProducts.forEach(product => {
                    visibleProductDisplayStates.set(product, {
                        display: product.style.display,
                        opacity: product.style.opacity || '1',
                        transform: product.style.transform || ''
                    });
                });
                
                // Сортируем только видимые товары (не скрытые фильтрацией)
                visibleProducts.sort((a, b) => {
                    switch(sortType) {
                        case 'priceLow':
                            return (parseFloat(a.getAttribute('data-price')) || 0) - (parseFloat(b.getAttribute('data-price')) || 0);
                        case 'priceHigh':
                            return (parseFloat(b.getAttribute('data-price')) || 0) - (parseFloat(a.getAttribute('data-price')) || 0);
                        case 'newest':
                            const aIsNew = a.querySelector('.badge-new') !== null;
                            const bIsNew = b.querySelector('.badge-new') !== null;
                            if (aIsNew && !bIsNew) return -1;
                            if (!aIsNew && bIsNew) return 1;
                            return 0;
                        case 'bestselling':
                            const reviewsElA = a.querySelector('.product-reviews');
                            const reviewsElB = b.querySelector('.product-reviews');
                            const reviewsA = reviewsElA ? parseInt(reviewsElA.textContent.replace(/[()]/g, '')) || 0 : 0;
                            const reviewsB = reviewsElB ? parseInt(reviewsElB.textContent.replace(/[()]/g, '')) || 0 : 0;
                            return reviewsB - reviewsA;
                        case 'topRated':
                            return (parseInt(b.getAttribute('data-rating')) || 0) - (parseInt(a.getAttribute('data-rating')) || 0);
                        default:
                            return 0;
                    }
                });
                
                // Временно отключаем transition для плавного перемещения
                allProducts.forEach(product => {
                    product.style.transition = 'none';
                });
                
                // Создаем DocumentFragment для эффективного добавления элементов
                const fragment = document.createDocumentFragment();
                
                // Добавляем отсортированные видимые товары в fragment
                visibleProducts.forEach(product => {
                    fragment.appendChild(product);
                });
                
                // Добавляем товары, скрытые фильтрацией (они остаются в конце и скрыты)
                hiddenByFilter.forEach(product => {
                    fragment.appendChild(product);
                });
                
                // Очищаем контейнер и добавляем все элементы в правильном порядке
                catalogCache.productsContainer.innerHTML = '';
                catalogCache.productsContainer.appendChild(fragment);
                
                // Восстанавливаем display статус для видимых товаров
                // Сначала показываем все видимые товары (пагинация потом скроет лишние)
                visibleProducts.forEach(product => {
                    product.style.display = '';
                    product.style.opacity = '1';
                    product.style.transform = '';
                });
                
                // Скрытые фильтрацией остаются скрытыми
                hiddenByFilter.forEach(product => {
                    product.style.display = 'none';
                });
                
                // Восстанавливаем transition после небольшой задержки
                setTimeout(() => {
                    allProducts.forEach(product => {
                        product.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                    });
                }, 50);
                
                // Обновляем кеш продуктов после перестановки
                catalogCache.products = Array.from(catalogCache.productsContainer.querySelectorAll('.product-card'));
                
                // Применяем пагинацию заново для отсортированных товаров
                // Это скроет товары, которые не должны быть видны на текущей странице
                if (visibleProducts.length > 0) {
                    // Сбрасываем на первую страницу при сортировке
                    paginationState.currentPage = 1;
                    setTimeout(() => applyPagination(), 100);
                } else {
                    // Если видимых товаров нет, обновляем UI пагинации
                    setTimeout(() => updatePagination(0), 100);
                }
                
                // Восстанавливаем позицию скролла
                requestAnimationFrame(() => {
                    window.scrollTo(0, scrollY);
                });
            });
        } catch (error) {
            console.error('Ошибка сортировки:', error);
        }
    }
    
    // Функция обновления UI пагинации
    function updatePagination(totalVisible) {
        try {
            const paginationEl = document.getElementById('pagination');
            if (!paginationEl) return;
            
            // Если товаров меньше или равно itemsPerPage, скрываем пагинацию
            if (totalVisible <= paginationState.itemsPerPage || paginationState.totalPages <= 1) {
                paginationEl.style.display = 'none';
                return;
            }
            
            paginationEl.style.display = 'block';
            
            // Обновляем кнопки пагинации
            const paginationContent = paginationEl.querySelector('.pagination-content');
            if (!paginationContent) return;
            
            // Очищаем существующие кнопки (кроме навигационных)
            const navButtons = paginationContent.querySelectorAll('.page-btn:has(.fa-chevron)');
            paginationContent.innerHTML = '';
            
            // Кнопка "Назад"
            const prevBtn = document.createElement('button');
            prevBtn.className = 'page-btn';
            prevBtn.disabled = paginationState.currentPage === 1;
            prevBtn.innerHTML = '<i class="fa-solid fa-chevron-left"></i>';
            prevBtn.onclick = () => changePage(paginationState.currentPage - 1);
            paginationContent.appendChild(prevBtn);
            
            // Номера страниц
            const maxVisiblePages = 5;
            let startPage = Math.max(1, paginationState.currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(paginationState.totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage < maxVisiblePages - 1) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            if (startPage > 1) {
                const firstBtn = document.createElement('button');
                firstBtn.className = 'page-btn';
                firstBtn.textContent = '1';
                firstBtn.onclick = () => changePage(1);
                paginationContent.appendChild(firstBtn);
                
                if (startPage > 2) {
                    const dots = document.createElement('span');
                    dots.className = 'page-dots';
                    dots.textContent = '...';
                    paginationContent.appendChild(dots);
                }
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = 'page-btn';
                if (i === paginationState.currentPage) {
                    pageBtn.classList.add('active');
                }
                pageBtn.textContent = i.toString();
                pageBtn.onclick = () => changePage(i);
                paginationContent.appendChild(pageBtn);
            }
            
            if (endPage < paginationState.totalPages) {
                if (endPage < paginationState.totalPages - 1) {
                    const dots = document.createElement('span');
                    dots.className = 'page-dots';
                    dots.textContent = '...';
                    paginationContent.appendChild(dots);
                }
                
                const lastBtn = document.createElement('button');
                lastBtn.className = 'page-btn';
                lastBtn.textContent = paginationState.totalPages.toString();
                lastBtn.onclick = () => changePage(paginationState.totalPages);
                paginationContent.appendChild(lastBtn);
            }
            
            // Кнопка "Вперед"
            const nextBtn = document.createElement('button');
            nextBtn.className = 'page-btn';
            nextBtn.disabled = paginationState.currentPage === paginationState.totalPages;
            nextBtn.innerHTML = '<i class="fa-solid fa-chevron-right"></i>';
            nextBtn.onclick = () => changePage(paginationState.currentPage + 1);
            paginationContent.appendChild(nextBtn);
            
            // Применяем пагинацию к видимым товарам
            applyPagination();
        } catch (error) {
            console.error('Ошибка обновления пагинации:', error);
        }
    }
    
    // Функция применения пагинации к видимым товарам
    function applyPagination() {
        if (!catalogCache.productsContainer) return;
        
        try {
            // Получаем все товары из контейнера
            const allProducts = Array.from(catalogCache.productsContainer.querySelectorAll('.product-card'));
            
            // Фильтруем только те, которые НЕ скрыты фильтрацией (используем data-атрибут)
            const visibleProducts = allProducts.filter(p => {
                // Товары, скрытые фильтрацией, имеют data-filtered-out="true"
                return !p.hasAttribute('data-filtered-out');
            });
            
            const totalVisible = visibleProducts.length;
            paginationState.totalItems = totalVisible;
            paginationState.totalPages = Math.max(1, Math.ceil(totalVisible / paginationState.itemsPerPage));
            
            // Если товаров меньше или равно itemsPerPage, показываем все видимые
            if (totalVisible <= paginationState.itemsPerPage) {
                visibleProducts.forEach(product => {
                    product.style.display = '';
                    product.style.opacity = '1';
                });
                // Скрываем товары, которые скрыты фильтрацией (если они еще не скрыты)
                allProducts.forEach(product => {
                    if (product.hasAttribute('data-filtered-out')) {
                        product.style.display = 'none';
                    }
                });
                paginationState.currentPage = 1;
                updatePagination(totalVisible);
                return;
            }
            
            // Применяем пагинацию только к видимым товарам (не скрытым фильтрацией)
            const start = (paginationState.currentPage - 1) * paginationState.itemsPerPage;
            const end = start + paginationState.itemsPerPage;
            
            visibleProducts.forEach((product, index) => {
                if (index >= start && index < end) {
                    // Показываем товар текущей страницы
                    product.style.display = '';
                    product.style.opacity = '1';
                } else {
                    // Скрываем товары других страниц (но НЕ скрываем те, что уже скрыты фильтрацией)
                    product.style.display = 'none';
                }
            });
            
            // Убеждаемся, что товары, скрытые фильтрацией, остаются скрытыми
            allProducts.forEach(product => {
                if (product.hasAttribute('data-filtered-out')) {
                    product.style.display = 'none';
                }
            });
            
            updatePagination(totalVisible);
        } catch (error) {
            console.error('Ошибка применения пагинации:', error);
        }
    }
    
    // Функция смены страницы
    function changePage(page) {
        if (page < 1 || page > paginationState.totalPages) return;
        
        paginationState.currentPage = page;
        
        // Прокручиваем к началу списка товаров
        const toolbar = document.querySelector('.products-toolbar');
        if (toolbar) {
            toolbar.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        updatePagination(paginationState.totalItems);
    }
    
    // Создаем debounced версии функций
    const debouncedFilter = debounce(filterProducts, 150);
    const debouncedUpdateCounts = debounce(updateFilterCounts, 200);
    
    // Инициализация при загрузке страницы
    document.addEventListener('DOMContentLoaded', function() {
        try {
            // Применяем сохраненный язык
            translatePage(currentLanguage);
            
            // Инициализируем кеш
            initCatalogCache();
            
            // Восстанавливаем сохраненный вид
            const savedView = localStorage.getItem('catalogView');
            if (savedView) {
                toggleView(savedView);
            }
            
            // Инициализируем счетчики
            initializeCounts();
            
            // Применяем начальную пагинацию после небольшой задержки
            setTimeout(() => {
                filterProducts();
            }, 100);
            
            // Обработчики для фильтров категорий и материалов
            document.querySelectorAll('.filter-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    filterProducts();
                    debouncedUpdateCounts();
                });
            });
            
            // Обработчик для слайдера цены с debounce
            if (catalogCache.priceSlider) {
                catalogCache.priceSlider.addEventListener('input', function() {
                    const value = parseInt(this.value) || 0;
                    if (catalogCache.priceValue) {
                        // Форматируем цену с пробелами для тысяч
                        const formattedValue = value.toLocaleString('ru-RU');
                        catalogCache.priceValue.textContent = formattedValue + ' ₽';
                    }
                    debouncedFilter();
                });
            }
            
            // Функция для раскрытия/закрытия секций фильтров
            function initFilterSections() {
                const filterHeaders = document.querySelectorAll('.filter-section-header');
                filterHeaders.forEach(header => {
                    header.style.cursor = 'pointer';
                    header.addEventListener('click', function() {
                        const sectionContent = this.nextElementSibling;
                        const icon = this.querySelector('.filter-section-icon');
                        if (sectionContent && sectionContent.classList.contains('filter-section-content')) {
                            const isOpen = sectionContent.style.display !== 'none' && 
                                         !sectionContent.classList.contains('collapsed');
                            
                            if (isOpen) {
                                sectionContent.style.display = 'none';
                                this.classList.add('collapsed');
                                if (icon) {
                                    icon.classList.remove('fa-chevron-down');
                                    icon.classList.add('fa-chevron-up');
                                }
                            } else {
                                sectionContent.style.display = 'block';
                                this.classList.remove('collapsed');
                                if (icon) {
                                    icon.classList.remove('fa-chevron-up');
                                    icon.classList.add('fa-chevron-down');
                                }
                            }
                        }
                    });
                });
                
                // По умолчанию все секции открыты на десктопе, закрыты на мобильных
                const filterContents = document.querySelectorAll('.filter-section-content');
                const isMobile = window.innerWidth < 768;
                filterContents.forEach(content => {
                    if (isMobile) {
                        content.style.display = 'none';
                        const header = content.previousElementSibling;
                        if (header && header.classList.contains('filter-section-header')) {
                            header.classList.add('collapsed');
                            const icon = header.querySelector('.filter-section-icon');
                            if (icon) {
                                icon.classList.remove('fa-chevron-down');
                                icon.classList.add('fa-chevron-up');
                            }
                        }
                    } else {
                        content.style.display = 'block';
                        const header = content.previousElementSibling;
                        if (header && header.classList.contains('filter-section-header')) {
                            header.classList.remove('collapsed');
                            const icon = header.querySelector('.filter-section-icon');
                            if (icon) {
                                icon.classList.remove('fa-chevron-up');
                                icon.classList.add('fa-chevron-down');
                            }
                        }
                    }
                });
            }
            
            // Обработчик изменения размера окна для фильтров
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    initFilterSections();
                }, 250);
            });
            
            // Инициализируем раскрывающиеся фильтры
            initFilterSections();
            
            // Обработчик для поиска с debounce
            if (catalogCache.searchInput) {
                catalogCache.searchInput.addEventListener('input', debouncedFilter);
            }
            
            // Обработчики для кнопок размеров
            document.querySelectorAll('.size-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.classList.toggle('active');
                    filterProducts();
                    debouncedUpdateCounts();
                });
            });
            
            // Обработчики для кнопок цветов
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.classList.toggle('active');
                    filterProducts();
                    debouncedUpdateCounts();
                });
            });
            
            // Обработчики для кнопок рейтинга
            document.querySelectorAll('.rating-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    filterProducts();
                    debouncedUpdateCounts();
                });
            });
            
            // Обработчик для сортировки
            if (catalogCache.sortSelect) {
                catalogCache.sortSelect.addEventListener('change', function() {
                    sortProducts(this.value);
                });
            }
            
            // Обработчик для кнопок wishlist
            document.querySelectorAll('.wishlist-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const icon = this.querySelector('i');
                    if (icon) {
                        if (icon.classList.contains('fa-regular')) {
                            icon.classList.remove('fa-regular');
                            icon.classList.add('fa-solid');
                            this.style.color = '#dc2626';
                        } else {
                            icon.classList.remove('fa-solid');
                            icon.classList.add('fa-regular');
                            this.style.color = '';
                        }
                    }
                });
            });
        } catch (error) {
            console.error('Ошибка инициализации:', error);
        }
    });
</script>

</body>
</html>